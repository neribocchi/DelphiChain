unit Node;

interface
uses horse,
FMX.Types,
block,
chain;

type

TNode = Class (TObject)

blockchain:TChain;
constructor create;

End;

implementation

{ TRestServer }

constructor TNode.create;
begin
  if THorse.IsRunning then
  begin
    log.d('already running');
    exit;
  end;
  THorse.Post('/initChain',
    procedure(Req: THorseRequest; Res: THorseResponse)
    begin
      req.ContentFields.Items['chainID'];
      req.ContentFields.Items['chainID'];


      Res.Send('pong');
    end);

  THorse.Post('/addBlock',
    procedure(Req: THorseRequest; Res: THorseResponse)
    begin
      log.d(req.ContentFields.Items['data']);
      Res.Send('pong');
    end);

  THorse.Listen(9000);
end;

end.
